{"version":3,"sources":["webpack:///./src/pages/timeline.module.css","webpack:///./src/pages/timeline.js"],"names":["module","exports","TimelinePage","refs","ReferenceManager","addEntitiesFromData","publicationsData","citationsData","filledTimelineData","fillReferences","timelineData","filledProjectData","projectsData","roles","hasRole","map","src","dest","startTime","DateTime","fromISO","startDate","endTime","endDate","duration","until","toDuration","sort","a","b","toMillis","title","href","onclick","role","index","slug","slugify","roleName","orgs","organization","id","class","css","timelineEvent","dates","timelineInset","parentOrganization","funder","description","roleId","projects","filter","project","projectSlug","name","to","products","product","creativeworks","getProjectsForRole"],"mappings":"+EACAA,EAAOC,QAAU,CAAC,cAAgB,0C,q6UCDlC,kQAsBe,SAASC,IACtB,IAAMC,EAAO,IAAIC,IACjBD,EAAKE,oBAAoBC,GACzBH,EAAKE,oBAAoBE,GACzB,IAAMC,EAAqBL,EAAKM,eAAeC,GACzCC,EAAoBR,EAAKM,eAAeG,GAExCC,EAAQL,EAAmBM,QAC9BC,KAAI,SAAAC,GACH,IAAMC,EAAI,iBAAOD,GAQjB,OAPAC,EAAKC,UAAYC,WAASC,QAAQH,EAAKI,WACvCJ,EAAKK,QAAUH,WAASC,QAAQH,EAAKM,SACrCN,EAAKO,SAAWP,EAAKC,UAAUO,MAAMR,EAAKK,SAASI,WAAW,CAC5D,QACA,SACA,SAEKT,KAERU,MACC,SAACC,EAAGC,GAAJ,OAAUA,EAAEP,QAAQQ,WAAaF,EAAEN,QAAQQ,cAmC/C,OACE,kBAAC,IAAD,CAAQC,MAAM,YACZ,mCAAQ,uBAAGC,KAAK,IAAIC,QAAQ,wCAApB,2BAAR,KACA,4BAGEpB,EAAME,KAAI,SAACmB,EAAMC,GACf,IAAMC,EAAOC,IAAQH,EAAKI,SAAW,IAAMC,IAAoCL,EAAKM,eACpF,OAAQ,yBAAKC,GAAIL,EAAMM,MAAOC,IAAIC,eAChC,6BACE,uBAAGF,MAAM,eAAeV,KAAM,IAAMI,GAApC,KACES,IAAuBX,EAAKhB,UAAWgB,EAAKZ,SAC7C,IAHH,IAGc,IACZ,gCAAUY,EAAKI,UACd,IALH,KAKU,IACNC,IAAkCL,EAAKM,eAE3C,yBAAKE,MAAOC,IAAIG,eACZZ,EAAKM,aAAaO,oBAAsB,6BACtC,uCAAcR,IAAkCL,EAAKM,aAAaO,sBAGpEb,EAAKM,aAAaQ,QAAU,6BAC1B,yCAAgBT,IAAkCL,EAAKM,aAAaQ,QAChEd,EAAKM,aAAaQ,OAAOD,oBAAsB,8BAAO,IAAP,YAClCR,IAAkCL,EAAKM,aAAaQ,OAAOD,oBADzB,QAQvDb,EAAKe,aAAe,2BAAKf,EAAKe,aAChC,2BAAG,wBAAIP,MAAM,6BAjEvB,SAA4BR,EAAME,GAChC,IAAMc,EAAShB,EAAK,OACpB,GAAKgB,EAIL,OAAOvC,EAAkBwC,SACtBpC,KAAI,SAAAC,GACH,IAAMC,EAAI,iBAAOD,GAGjB,OAFAC,EAAKC,UAAYC,WAASC,QAAQH,EAAKI,WACvCJ,EAAKK,QAAUH,WAASC,QAAQH,EAAKM,SAC9BN,KAERU,MACC,SAACC,EAAGC,GAAJ,OAAUA,EAAEP,QAAQQ,WAAaF,EAAEN,QAAQQ,cAE5CsB,QAAO,SAAAC,GAAO,OAAIA,EAAQnB,OAASgB,KAAQnC,KAAI,SAAAsC,GAC9C,IAAMC,EAAclB,EAAO,IAAMC,IAAQgB,EAAQE,MAC3CrC,EAAYC,WAASC,QAAQiC,EAAQhC,WACrCC,EAAUH,WAASC,QAAQiC,EAAQ9B,SACzC,OAAO,oCACL,wBAAIkB,GAAIa,GAAa,uBAAGZ,MAAM,eAAeV,KAAM,IAAMsB,GAApC,KACnB,4CADF,IAC4B,kBAAC,OAAD,CAAME,GAAI,aAAenB,IAAQgB,EAAQE,OAAQF,EAAQE,MADrF,KACqGV,IAAuB3B,EAAWI,GADvI,MACsJ+B,EAAQJ,aAG5JI,EAAQI,UAAY,wBAAIf,MAAM,gBAC5BW,EAAQI,SAAS1C,KAAI,SAAA2C,GAAO,OAAI,4BAAKC,IAAsCD,EAASJ,YAwClFM,CAAmB1B,EAAME,IACxBF,EAAKuB,UAAY,IAAI1C,KAAI,SAAA2C,GAAO,OAAI,4BAAKC,IAAiCD,EAAStB,GAAM","file":"component---src-pages-timeline-js-42c61442a6da32491eb6.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"timelineEvent\":\"timeline-module--timelineEvent--1GFNQ\"};","import React from \"react\"\nimport { DateTime } from \"luxon\"\nimport { Link } from \"gatsby\"\n\nimport slugify from 'slugify'\n\nimport { ReferenceManager } from \"../lib/entities.js\"\nimport * as dates from \"../lib/dates.js\"\nimport * as orgs from \"../lib/organizations.js\"\nimport * as creativeworks from \"../lib/creativeworks.js\"\n\nimport Layout from \"../components/layout\"\n// import Image from \"../components/image\"\nimport SEO from \"../components/seo\"\n\nimport css from \"./timeline.module.css\"\n\nimport timelineData from \"../jsonld/timeline.json\"\nimport projectsData from \"../jsonld/projects.json\"\nimport publicationsData from \"../jsonld/publications.json\"\nimport citationsData from \"../jsonld/citations.json\"\n\nexport default function TimelinePage() {\n  const refs = new ReferenceManager();\n  refs.addEntitiesFromData(publicationsData);\n  refs.addEntitiesFromData(citationsData);\n  const filledTimelineData = refs.fillReferences(timelineData);\n  const filledProjectData = refs.fillReferences(projectsData);\n\n  const roles = filledTimelineData.hasRole\n    .map(src => {\n      const dest = {...src};\n      dest.startTime = DateTime.fromISO(dest.startDate);\n      dest.endTime = DateTime.fromISO(dest.endDate);\n      dest.duration = dest.startTime.until(dest.endTime).toDuration([\n        'years',\n        'months',\n        'days'\n      ]);\n      return dest;\n    })\n    .sort(\n      (a, b) => b.endTime.toMillis() - a.endTime.toMillis()\n    );\n\n  function getProjectsForRole(role, slug) {\n    const roleId = role['@id'];\n    if (!roleId) return;\n\n    // TODO: sort products in time order.\n\n    return filledProjectData.projects\n      .map(src => {\n        const dest = {...src};\n        dest.startTime = DateTime.fromISO(dest.startDate);\n        dest.endTime = DateTime.fromISO(dest.endDate);\n        return dest;\n      })\n      .sort(\n        (a, b) => b.endTime.toMillis() - a.endTime.toMillis()\n      )\n      .filter(project => project.role === roleId).map(project => {\n        const projectSlug = slug + '-' + slugify(project.name)\n        const startTime = DateTime.fromISO(project.startDate)\n        const endTime = DateTime.fromISO(project.endDate)\n        return <>\n          <li id={projectSlug}><a class=\"section-link\" href={'#' + projectSlug}>&sect;</a>\n            <strong>Project:</strong> <Link to={'/projects#' + slugify(project.name)}>{project.name}</Link> ({ dates.getShortDiffSpan(startTime, endTime) }): { project.description}\n\n          </li>\n          { project.products && <ul class=\"uncompressed\">\n            { project.products.map(product => <li>{creativeworks.renderCreativeWorkShort(product, projectSlug)}</li>) }\n          </ul> }\n        </>\n      })\n  }\n\n  return (\n    <Layout title=\"Timeline\">\n      <small>(<a href=\"#\" onclick=\"$('.roleProducts').slideToggle(1000)\">Toggle showing products</a>)</small>\n      <p></p>\n\n      {\n        roles.map((role, index) => {\n          const slug = slugify(role.roleName + '-' + orgs.getOrganizationNamePlaceString(role.organization));\n          return (<div id={slug} class={css.timelineEvent}>\n            <div>\n              <a class=\"section-link\" href={\"#\" + slug}>&sect;</a>\n              { dates.getShortDiffSpan(role.startTime, role.endTime) }\n              {\" \"}&bull;{\" \"}\n              <strong>{ role.roleName }</strong>\n              {\" \"}at{\" \"}\n              { orgs.getOrganizationNamePlaceSpan(role.organization) }\n            </div>\n            <div class={css.timelineInset}>\n              { role.organization.parentOrganization && <div>\n                  <em>Part of { orgs.getOrganizationNamePlaceSpan(role.organization.parentOrganization) }</em>\n                </div>\n              }\n              { role.organization.funder && <div>\n                  <em>Funded by { orgs.getOrganizationNamePlaceSpan(role.organization.funder) }\n                    { role.organization.funder.parentOrganization && <span>{\" \"}\n                        (part of { orgs.getOrganizationNamePlaceSpan(role.organization.funder.parentOrganization) })\n                      </span>\n                    }\n                  </em>\n                </div>\n              }\n            </div>\n            { role.description && <p>{ role.description }</p> }\n            <p><ul class=\"uncompressed roleProducts\">\n              { getProjectsForRole(role, slug) }\n              { (role.products || []).map(product => <li>{creativeworks.renderCreativeWork(product, slug, false)}</li>) }\n            </ul></p>\n          </div>);\n        })\n      }\n    </Layout>\n  )\n}\n"],"sourceRoot":""}