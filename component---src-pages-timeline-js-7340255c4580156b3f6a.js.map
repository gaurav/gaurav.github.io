{"version":3,"sources":["webpack:///./src/pages/timeline.module.css","webpack:///./src/pages/timeline.js"],"names":["module","exports","TimelinePage","refs","ReferenceManager","addEntitiesFromData","publicationsData","citationsData","filledTimelineData","fillReferences","timelineData","filledProjectData","projectsData","roles","hasRole","map","src","dest","Object","assign","startTime","DateTime","fromISO","startDate","endTime","endDate","duration","until","toDuration","sort","a","b","toMillis","React","createElement","Layout","title","href","onclick","role","index","slug","slugify","roleName","orgs","organization","id","class","css","timelineEvent","dates","timelineInset","parentOrganization","funder","description","roleId","projects","filter","project","projectSlug","name","Fragment","Link","to","products","product","creativeworks","getProjectsForRole"],"mappings":"+EACAA,EAAOC,QAAU,CAAC,cAAgB,0C,8SCqBnB,SAASC,IACtB,IAAMC,EAAO,IAAIC,IACjBD,EAAKE,oBAAoBC,GACzBH,EAAKE,oBAAoBE,GACzB,IAAMC,EAAqBL,EAAKM,eAAeC,GACzCC,EAAoBR,EAAKM,eAAeG,GAExCC,EAAQL,EAAmBM,QAC9BC,KAAI,SAAAC,GACH,IAAMC,EAAIC,OAAAC,OAAA,GAAOH,GAQjB,OAPAC,EAAKG,UAAYC,WAASC,QAAQL,EAAKM,WACvCN,EAAKO,QAAUH,WAASC,QAAQL,EAAKQ,SACrCR,EAAKS,SAAWT,EAAKG,UAAUO,MAAMV,EAAKO,SAASI,WAAW,CAC5D,QACA,SACA,SAEKX,KAERY,MACC,SAACC,EAAGC,GAAC,OAAKA,EAAEP,QAAQQ,WAAaF,EAAEN,QAAQQ,cAmC/C,OACEC,IAAAC,cAACC,IAAM,CAACC,MAAM,YACZH,IAAAC,cAAA,aAAO,IAACD,IAAAC,cAAA,KAAGG,KAAK,IAAIC,QAAQ,wCAAuC,2BAA2B,KAC9FL,IAAAC,cAAA,UAGErB,EAAME,KAAI,SAACwB,EAAMC,GACf,IAAMC,EAAOC,IAAQH,EAAKI,SAAW,IAAMC,IAAoCL,EAAKM,eACpF,OAAQZ,IAAAC,cAAA,OAAKY,GAAIL,EAAMM,MAAOC,IAAIC,eAChChB,IAAAC,cAAA,WACED,IAAAC,cAAA,KAAGa,MAAM,eAAeV,KAAM,IAAMI,GAAM,KACxCS,IAAuBX,EAAKnB,UAAWmB,EAAKf,SAC7C,IAAI,IAAO,IACZS,IAAAC,cAAA,cAAUK,EAAKI,UACd,IAAI,KAAG,IACNC,IAAkCL,EAAKM,eAE3CZ,IAAAC,cAAA,OAAKa,MAAOC,IAAIG,eACZZ,EAAKM,aAAaO,oBAAsBnB,IAAAC,cAAA,WACtCD,IAAAC,cAAA,UAAI,WAAUU,IAAkCL,EAAKM,aAAaO,sBAGpEb,EAAKM,aAAaQ,QAAUpB,IAAAC,cAAA,WAC1BD,IAAAC,cAAA,UAAI,aAAYU,IAAkCL,EAAKM,aAAaQ,QAChEd,EAAKM,aAAaQ,OAAOD,oBAAsBnB,IAAAC,cAAA,YAAO,IAAI,YAC7CU,IAAkCL,EAAKM,aAAaQ,OAAOD,oBAAqB,QAOrGb,EAAKe,aAAerB,IAAAC,cAAA,SAAKK,EAAKe,aAChCrB,IAAAC,cAAA,SAAGD,IAAAC,cAAA,MAAIa,MAAM,6BAjEvB,SAA4BR,EAAME,GAChC,IAAMc,EAAShB,EAAK,OACpB,GAAKgB,EAIL,OAAO5C,EAAkB6C,SACtBzC,KAAI,SAAAC,GACH,IAAMC,EAAIC,OAAAC,OAAA,GAAOH,GAGjB,OAFAC,EAAKG,UAAYC,WAASC,QAAQL,EAAKM,WACvCN,EAAKO,QAAUH,WAASC,QAAQL,EAAKQ,SAC9BR,KAERY,MACC,SAACC,EAAGC,GAAC,OAAKA,EAAEP,QAAQQ,WAAaF,EAAEN,QAAQQ,cAE5CyB,QAAO,SAAAC,GAAO,OAAIA,EAAQnB,OAASgB,KAAQxC,KAAI,SAAA2C,GAC9C,IAAMC,EAAclB,EAAO,IAAMC,IAAQgB,EAAQE,MAC3CxC,EAAYC,WAASC,QAAQoC,EAAQnC,WACrCC,EAAUH,WAASC,QAAQoC,EAAQjC,SACzC,OAAOQ,IAAAC,cAAAD,IAAA4B,SAAA,KACL5B,IAAAC,cAAA,MAAIY,GAAIa,GAAa1B,IAAAC,cAAA,KAAGa,MAAM,eAAeV,KAAM,IAAMsB,GAAa,KACpE1B,IAAAC,cAAA,cAAQ,YAAiB,IAACD,IAAAC,cAAC4B,OAAI,CAACC,GAAI,aAAerB,IAAQgB,EAAQE,OAAQF,EAAQE,MAAY,KAAIV,IAAuB9B,EAAWI,GAAU,MAAKkC,EAAQJ,aAG5JI,EAAQM,UAAY/B,IAAAC,cAAA,MAAIa,MAAM,gBAC5BW,EAAQM,SAASjD,KAAI,SAAAkD,GAAO,OAAIhC,IAAAC,cAAA,UAAKgC,IAAsCD,EAASN,YAwClFQ,CAAmB5B,EAAME,IACxBF,EAAKyB,UAAY,IAAIjD,KAAI,SAAAkD,GAAO,OAAIhC,IAAAC,cAAA,UAAKgC,IAAiCD,EAASxB,GAAM,gB","file":"component---src-pages-timeline-js-7340255c4580156b3f6a.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"timelineEvent\":\"timeline-module--timelineEvent--1GFNQ\"};","import React from \"react\"\nimport { DateTime } from \"luxon\"\nimport { Link } from \"gatsby\"\n\nimport slugify from 'slugify'\n\nimport { ReferenceManager } from \"../lib/entities.js\"\nimport * as dates from \"../lib/dates.js\"\nimport * as orgs from \"../lib/organizations.js\"\nimport * as creativeworks from \"../lib/creativeworks.js\"\n\nimport Layout from \"../components/layout\"\n// import Image from \"../components/image\"\nimport SEO from \"../components/seo\"\n\nimport css from \"./timeline.module.css\"\n\nimport timelineData from \"../../jsonld/timeline.json\"\nimport projectsData from \"../../jsonld/projects.json\"\nimport publicationsData from \"../../jsonld/publications.json\"\nimport citationsData from \"../../jsonld/citations.json\"\n\nexport default function TimelinePage() {\n  const refs = new ReferenceManager();\n  refs.addEntitiesFromData(publicationsData);\n  refs.addEntitiesFromData(citationsData);\n  const filledTimelineData = refs.fillReferences(timelineData);\n  const filledProjectData = refs.fillReferences(projectsData);\n\n  const roles = filledTimelineData.hasRole\n    .map(src => {\n      const dest = {...src};\n      dest.startTime = DateTime.fromISO(dest.startDate);\n      dest.endTime = DateTime.fromISO(dest.endDate);\n      dest.duration = dest.startTime.until(dest.endTime).toDuration([\n        'years',\n        'months',\n        'days'\n      ]);\n      return dest;\n    })\n    .sort(\n      (a, b) => b.endTime.toMillis() - a.endTime.toMillis()\n    );\n\n  function getProjectsForRole(role, slug) {\n    const roleId = role['@id'];\n    if (!roleId) return;\n\n    // TODO: sort products in time order.\n\n    return filledProjectData.projects\n      .map(src => {\n        const dest = {...src};\n        dest.startTime = DateTime.fromISO(dest.startDate);\n        dest.endTime = DateTime.fromISO(dest.endDate);\n        return dest;\n      })\n      .sort(\n        (a, b) => b.endTime.toMillis() - a.endTime.toMillis()\n      )\n      .filter(project => project.role === roleId).map(project => {\n        const projectSlug = slug + '-' + slugify(project.name)\n        const startTime = DateTime.fromISO(project.startDate)\n        const endTime = DateTime.fromISO(project.endDate)\n        return <>\n          <li id={projectSlug}><a class=\"section-link\" href={'#' + projectSlug}>&sect;</a>\n            <strong>Project:</strong> <Link to={'/projects#' + slugify(project.name)}>{project.name}</Link> ({ dates.getShortDiffSpan(startTime, endTime) }): { project.description}\n\n          </li>\n          { project.products && <ul class=\"uncompressed\">\n            { project.products.map(product => <li>{creativeworks.renderCreativeWorkShort(product, projectSlug)}</li>) }\n          </ul> }\n        </>\n      })\n  }\n\n  return (\n    <Layout title=\"Timeline\">\n      <small>(<a href=\"#\" onclick=\"$('.roleProducts').slideToggle(1000)\">Toggle showing products</a>)</small>\n      <p></p>\n\n      {\n        roles.map((role, index) => {\n          const slug = slugify(role.roleName + '-' + orgs.getOrganizationNamePlaceString(role.organization));\n          return (<div id={slug} class={css.timelineEvent}>\n            <div>\n              <a class=\"section-link\" href={\"#\" + slug}>&sect;</a>\n              { dates.getShortDiffSpan(role.startTime, role.endTime) }\n              {\" \"}&bull;{\" \"}\n              <strong>{ role.roleName }</strong>\n              {\" \"}at{\" \"}\n              { orgs.getOrganizationNamePlaceSpan(role.organization) }\n            </div>\n            <div class={css.timelineInset}>\n              { role.organization.parentOrganization && <div>\n                  <em>Part of { orgs.getOrganizationNamePlaceSpan(role.organization.parentOrganization) }</em>\n                </div>\n              }\n              { role.organization.funder && <div>\n                  <em>Funded by { orgs.getOrganizationNamePlaceSpan(role.organization.funder) }\n                    { role.organization.funder.parentOrganization && <span>{\" \"}\n                        (part of { orgs.getOrganizationNamePlaceSpan(role.organization.funder.parentOrganization) })\n                      </span>\n                    }\n                  </em>\n                </div>\n              }\n            </div>\n            { role.description && <p>{ role.description }</p> }\n            <p><ul class=\"uncompressed roleProducts\">\n              { getProjectsForRole(role, slug) }\n              { (role.products || []).map(product => <li>{creativeworks.renderCreativeWork(product, slug, false)}</li>) }\n            </ul></p>\n          </div>);\n        })\n      }\n    </Layout>\n  )\n}\n"],"sourceRoot":""}